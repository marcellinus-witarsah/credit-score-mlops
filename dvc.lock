schema: '2.0'
stages:
  preprocess_data:
    cmd: python credit_score_mlops/data_preprocessing.py data/raw/credit_risk_dataset.csv
      data/processed/train.csv data/processed/test.csv
    deps:
    - path: credit_score_mlops/data_preprocessing.py
      hash: md5
      md5: 5d655587d08b38999c539ef06a110343
      size: 1407
    - path: data/raw/credit_risk_dataset.csv
      hash: md5
      md5: 9a01768113784fa109745fd8fe031eee
      size: 1804682
    - path: params.yaml
      hash: md5
      md5: 2b324580c56361f7b5eba7dd3c26230e
      size: 665
    params:
      params.yaml:
        data_preprocessing.random_state: 42
        data_preprocessing.test_size: 0.3
        target: loan_status
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 8eeea2e6dff55f6ef2a8e5360c17dc15
      size: 531749
    - path: data/processed/train.csv
      hash: md5
      md5: 605eccc3d25fe76586dec96b21a561ed
      size: 1240548
  train:
    cmd: python credit_score_mlops/modeling/train.py data/processed/train.csv data/processed/test.csv
      models/model.pkl
    deps:
    - path: credit_score_mlops/modeling/train.py
      hash: md5
      md5: d2951761cdda2371dd5c853ff3e5e8bf
      size: 3976
    - path: credit_score_mlops/modeling/woe_logistic_regression.py
      hash: md5
      md5: bd8c588d01a13ffa52a5f18210d9f446
      size: 6535
    - path: credit_score_mlops/plots.py
      hash: md5
      md5: 5f3f0d3b239953359a4dacfec6dccbdb
      size: 7644
    - path: credit_score_mlops/utils.py
      hash: md5
      md5: 4f497c3b3a7664780dba08da11670f33
      size: 3205
    - path: data/processed/test.csv
      hash: md5
      md5: 8eeea2e6dff55f6ef2a8e5360c17dc15
      size: 531749
    - path: data/processed/train.csv
      hash: md5
      md5: 605eccc3d25fe76586dec96b21a561ed
      size: 1240548
    - path: params.yaml
      hash: md5
      md5: 2b324580c56361f7b5eba7dd3c26230e
      size: 665
    params:
      params.yaml:
        target: loan_status
        train.model_name: woe-lr-1.0.0
        train.model_params:
          woe_transformer_params:
            numerical_columns:
            - person_age
            - person_income
            - person_emp_length
            - loan_amnt
            - loan_int_rate
            - loan_percent_income
            - cb_person_cred_hist_length
            categorical_columns:
            - person_home_ownership
            - loan_intent
            - loan_grade
            - cb_person_default_on_file
            bins: 8
          logreg_params:
            random_state: 42
        train.test_calibration_curve_file: reports/figures/test_calibration_curve.png
        train.train_calibration_curve_file: reports/figures/train_calibration_curve.png
  evaluate:
    cmd: python credit_score_mlops/modeling/evaluate.py models/model.pkl data/processed/train.csv
      data/processed/test.csv
    deps:
    - path: credit_score_mlops/modeling/evaluate.py
      hash: md5
      md5: 19cd3663372b74fa4c069ad054051b6e
      size: 2070
    - path: data/processed/test.csv
      hash: md5
      md5: 8eeea2e6dff55f6ef2a8e5360c17dc15
      size: 531749
    - path: data/processed/train.csv
      hash: md5
      md5: 605eccc3d25fe76586dec96b21a561ed
      size: 1240548
    - path: models/model.pkl
      hash: md5
      md5: ef8b2c01dbe246a1e64d027cc3838673
      size: 6607
    - path: params.yaml
      hash: md5
      md5: a9c3dfa75b25b8932063ba4a811a428a
      size: 709
    params:
      params.yaml:
        evaluate.test_calibration_curve_file: reports/figures/test_calibration_curve.png
        evaluate.test_metrics_file: reports/test_metrics.json
        evaluate.train_calibration_curve_file: reports/figures/train_calibration_curve.png
        evaluate.train_metrics_file: reports/train_metrics.json
        target: loan_status
    outs:
    - path: reports/figures/test_calibration_curve.png
      hash: md5
      md5: 3031545fd7b6c5417fa24dc08ae852cd
      size: 50374
    - path: reports/figures/train_calibration_curve.png
      hash: md5
      md5: edbeae05ac2a31534c229868fd69ee56
      size: 50733
    - path: reports/test_metrics.json
      hash: md5
      md5: ef72fda2cc50f15a7afa0237833dc8ae
      size: 173
    - path: reports/train_metrics.json
      hash: md5
      md5: 08198cc22816feaa80bfbef4d1ffee10
      size: 173

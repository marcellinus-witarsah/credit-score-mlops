schema: '2.0'
stages:
  preprocess_data:
    cmd: python credit_score_mlops/data_preprocessing.py data/raw/credit_risk_dataset.csv
      data/processed/train.csv data/processed/test.csv
    deps:
    - path: credit_score_mlops/data_preprocessing.py
      hash: md5
      md5: 6b84d5b2faa0dcf9fb33f55193f11b7d
      size: 1583
    - path: data/raw/credit_risk_dataset.csv
      hash: md5
      md5: 9a01768113784fa109745fd8fe031eee
      size: 1804682
    params:
      params.yaml:
        data_preprocessing.random_state: 42
        data_preprocessing.test_size: 0.3
        target: loan_status
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 8eeea2e6dff55f6ef2a8e5360c17dc15
      size: 531749
    - path: data/processed/train.csv
      hash: md5
      md5: 605eccc3d25fe76586dec96b21a561ed
      size: 1240548
  train:
    cmd: python credit_score_mlops/modeling/train.py data/processed/train.csv models/model.pkl
    deps:
    - path: credit_score_mlops/modeling/train.py
      hash: md5
      md5: e837b2c75d72da5ac2f220a400266c4a
      size: 1086
    - path: data/processed/train.csv
      hash: md5
      md5: 605eccc3d25fe76586dec96b21a561ed
      size: 1240548
    params:
      params.yaml:
        target: loan_status
        train.logreg_params:
          random_state: 42
        train.woe_transformer_params:
          numerical_columns:
          - person_age
          - person_income
          - person_emp_length
          - loan_amnt
          - loan_int_rate
          - loan_percent_income
          - cb_person_cred_hist_length
          categorical_columns:
          - person_home_ownership
          - loan_intent
          - loan_grade
          - cb_person_default_on_file
          bins: 5
    outs:
    - path: models/model.pkl
      hash: md5
      md5: ef8b2c01dbe246a1e64d027cc3838673
      size: 6607
  evaluate:
    cmd: python credit_score_mlops/modeling/evaluate.py models/model.pkl data/processed/train.csv
      data/processed/test.csv
    deps:
    - path: credit_score_mlops/modeling/evaluate.py
      hash: md5
      md5: ccd817080922148d9213b6ea12f0f63b
      size: 2038
    - path: data/processed/test.csv
      hash: md5
      md5: 8eeea2e6dff55f6ef2a8e5360c17dc15
      size: 531749
    - path: data/processed/train.csv
      hash: md5
      md5: 605eccc3d25fe76586dec96b21a561ed
      size: 1240548
    params:
      params.yaml:
        target: loan_status
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: 2ce2e856bc4bd55fe4219cce974d0b09
      size: 418
    - path: reports/plots/sklearn/test_calibration.json
      hash: md5
      md5: bb3790b569af0ed2ef26a0841639aee2
      size: 1121
    - path: reports/plots/sklearn/train_calibration.json
      hash: md5
      md5: 54c2c50d454022e05e35ca01e39558ac
      size: 1131
